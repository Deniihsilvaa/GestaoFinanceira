<!DOCTYPE html>
<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
      charset="UTF-8"
    />
    <!-- Google Fonts -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icons CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- jQuery UI (if needed) -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- DataTables CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/buttons/2.1.0/css/buttons.dataTables.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/scroller/2.4.3/css/scroller.dataTables.min.css"
    />

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.1.0/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/scroller/2.4.3/js/scroller.dataTables.min.js"></script>

    <!-- Flags CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/lafeber/world-flags-sprite/stylesheets/flags32-both.css"
    />

    <!-- Bootstrap JS (não esqueça de incluir) -->


    <style>
      :root {
        /* Paleta de cores */
        --cor-primaria: #fafafa;
        --cor-secundaria: #07637a;
        --cor-terciaria: #ffffff;
        --cor-quaternaria: #e5e5e5;
        --cor-acento: #ff5733;
        --cor-branco: #ffffff;
        --cor-subFundo: linear-gradient(74deg, #ff0066, #bb00ff, #b358c3);
        --cor-Fundo: #e3ac98;
        /* Exemplo de cor de acento */
      }

      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100vh;
        font-family: "Raleway", sans-serif;
        font-size: 0.8rem;
      }
      button {
        border: none;
      }

      .ui-accordion .ui-accordion-content {
        display: grid;
      }

      button.btn.btn-light.btn-acc {
        width: 100%;
        text-align: center;
        border: none;
      }

      /* Classe para mostrar/ocultar o overlay */
      .d-none {
        display: none;
      }

      .accordion-control {
        text-align: left;
        font-size: 1.2rem;
        font-family: "Montserrat";
        background: #000;
        color: white;
        border: none;
        padding: 0.8em 1em;
        cursor: pointer;
      }

      .menu {
        position: relative;
      }

      .menu__item {
        position: relative;
        padding: 0.5em 1em;
      }

      .menu__border {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 4px;
        background-color: #ff5733;
        /* Cor da borda */
        transition: transform 0.3s ease;
      }

      .spinner-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.7);
        /* Cor de fundo com transparência */
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        /* Certifique-se de que o overlay esteja acima de outros conteúdos */
      }
      .alert-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(
          0,
          0,
          0,
          0.5
        ); /* Fundo escuro com transparência */
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }

      .custom-alert {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        max-width: 300px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="SuperBody">
      <nav class="navbar navbar-expand-lg shadow">
        <div class="container-fluid">
          <a class="navbar-brand text-white" href="#">Home</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <!-- Cadastro Dropdown -->
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Cadastro
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('clientes')"
                      >Clientes</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('fornecedores')"
                      >Fornecedores</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('produtos')"
                      >Produtos</a
                    >
                  </li>
                </ul>
              </li>

              <!-- Vendas Dropdown -->
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Vendas
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('pedidos')"
                      >Pedidos</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('orcamentos')"
                      >Orçamentos</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('faturamento')"
                      >Faturamento</a
                    >
                  </li>
                </ul>
              </li>

              <!-- Suplementos Dropdown -->
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Suplementos
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('gestao_estoque')"
                      >Gestão de Estoque</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('compras')"
                      >Compras</a
                    >
                  </li>
                </ul>
              </li>

              <!-- Financeiro Dropdown -->
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Financeiro
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('contas_a_pagar')"
                      >Contas a Pagar</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('contas_a_receber')"
                      >Contas a Receber</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('caixa_bancos')"
                      >Caixa e Bancos</a
                    >
                  </li>
                </ul>
              </li>

              <!-- NFe Dropdown -->
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  NFe
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('notas_entrada')"
                      >Notas de Entrada</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('notas_saida')"
                      >Notas de Saída</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="chamaTemplate('documentos_nfe')"
                      >Documentos NFe</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- Breadcrumb (abaixo da navbar) -->
      <nav style="--bs-breadcrumb-divider: '>'" aria-label="breadcrumb">
        <ol class="breadcrumb" id="breadcrumbNav">
          <li class="breadcrumb-item">
            <a href="#" onclick="chamaTemplate('home')">Home</a>
          </li>
          <li
            class="breadcrumb-item active"
            aria-current="page"
            id="breadcrumbPage"
          ></li>
        </ol>
      </nav>

      <template id="conteudo"></template>
      <!-- Conteúdo Principal -->
      <div class="container mt-4">
        <div class="card">
          <div id="conteudo-principal"></div>
        </div>
      </div>
    </div>
    <!-- Spinner Overlay -->
    <div id="spinner-overlay" class="spinner-overlay d-none">
      <div class="d-flex justify-content-center align-items-center h-100">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
    <!-- Alerta -->
    <div id="liveAlertPlaceholder"></div>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>

    <script id="MetodoPost">
      let urlAjax =
        "https://script.google.com/macros/s/AKfycbwPUs1MEFOrBxtaeGKY7n6kT_yOzSYX4FH2BZbqJBrNgmGYDmxNeRKGwUy_jsbJtzwHpg/exec";

      $("#accordion").accordion({
        active: false,
        collapsible: true,
        heightStyle: "content",
        icons: {
          header: "ui-icon-circle-plus", // Ícone para cabeçalhos fechados
          activeHeader: "ui-icon-circle-minus", // Ícone para cabeçalhos abertos
        },
      });

      // Função para chamar o template
      const inserirTemplate = (templateId, destino) => {
        try {
          const formularioID = document.getElementById(templateId);
          const paginanova = document.getElementById(destino);
          paginanova.innerHTML = "";
          const clone = document.importNode(formularioID.content, true);
          paginanova.appendChild(clone);
          return formularioID;
        } catch (error) {
          return null;
        }
      };

      function chamaTemplate(pagina) {
        mostrarSpinner();
        setTimeout(() => {
          esconderSpinner();
        }, 1000);

        // Atualiza o breadcrumb com o nome da página
        const breadcrumbPage = document.getElementById("breadcrumbPage");
        if (pagina != "home") {
          breadcrumbPage.textContent =
            pagina.charAt(0).toUpperCase() + pagina.slice(1);
        }

        // let x = "conteudo-principal";
        // const formularioID = inserirTemplate(pagina, x);
        // if (!formularioID) return;

        // const formularioID = inserirTemplate(pagina);
        const paginaB = pagina;
        const navbarNavDropdown = bootstrap.Collapse.getInstance(
          document.getElementById("navbarNavDropdown")
        );
        if (navbarNavDropdown) {
          navbarNavDropdown.hide(); // Fecha o collapse após selecionar
        }

        switch (paginaB) {
          case "clientes":
            cadastroCliente();
            break;
          case "fornecedores":
            cadastrofornecedores();
            break;
          case "produtos":
            cadastroprodutos();
            break;
          case "notas_entrada":
            cadastronotas_entrada();
            break;
          case "notas_saida":
            cadastronotas_saida();
            break;
          case "documentos_nfe":
            cadastrodocumentos_nfe();
            break;
          case "home":
            home();
            break;
          default:
            document.getElementById("conteudo-principal").innerHTML = ``;
            break;
        }
      }
    </script>

    <script id="function aux">
      // Função para mostrar o spinner
      function mostrarSpinner() {
        document.getElementById("spinner-overlay").classList.remove("d-none");
      }

      // Função para esconder o spinner
      function esconderSpinner() {
        document.getElementById("spinner-overlay").classList.add("d-none");
      }

      function executarAcaoComData(data, inputId) {
        // Obter o dia da semana atual
        const diasDaSemana = [
          "Domingo",
          "Segunda-feira",
          "Terça-feira",
          "Quarta-feira",
          "Quinta-feira",
          "Sexta-feira",
          "Sábado",
        ];

        // Fazer a requisição AJAX para obter os dados
        $.ajax({
          type: "POST",
          url: urlAjax,
          data: {
            qualFuncao: "carregarScalaDias",
          },
          success: function (response) {
            if (response.situacao) {
              // Parsear dados JSON se necessário
              const dados = response.dados; // Supondo que response.dados é o JSON
              // processarDadosSemanal(userData)
              // Definir o valor no input correto
              if (
                [
                  "Segunda-feira",
                  "Terça-feira",
                  "Quarta-feira",
                  "Quinta-feira",
                  "Sexta-feira",
                ].includes(diaAtual)
              ) {
                document.getElementById(inputId).value = valorHora;
              } else if (["Sábado", "Domingo"].includes(diaAtual)) {
                document.getElementById(inputId).value = valorHora;
              }
            } else {
              alert("Erro de retorno");
            }
          },
          error: function (error) {
            console.error("Erro Escala ==>", error);
          },
        });
      }

      function executarDropdown() {
        const tabElms = document.querySelectorAll('a[data-bs-toggle="list"]');
        tabElms.forEach((tabElm) => {
          tabElm.addEventListener("shown.bs.tab", (event) => {
            event.target; // newly activated tab
            event.relatedTarget; // previous active tab
          });
        });
      }
      function mostrarAlerta(mensagem, tipo) {
        const alertPlaceholder = document.getElementById(
          "liveAlertPlaceholder"
        );

        // Criando o overlay do alerta
        const alertOverlay = document.createElement("div");
        alertOverlay.className = "alert-overlay";

        switch (tipo) {
          case 1:
            var classe = "alert alert-success";
            break;
          case 2:
            var classe = "alert alert-danger";
            break;
          case 3:
            var classe = "alert alert-warning";
            break;
          default:
            var classe = "alert alert-info";
            break;
        }

        // Criando o conteúdo do alerta
        const alertContent = `
    <div class="${classe}">
      <div class="header">
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onclick="fecharAlerta()"> </button>
      </div>
      <div class="alert-text">
        <p>${mensagem}</p>
      </div>
    </div>
  `;

        // Inserindo o conteúdo no overlay
        alertOverlay.innerHTML = alertContent;

        // Inserindo o alerta na página
        alertPlaceholder.appendChild(alertOverlay);
      }

      function fecharAlerta() {
        const alertPlaceholder = document.getElementById(
          "liveAlertPlaceholder"
        );
        alertPlaceholder.innerHTML = ""; // Remove o alerta
      }
      // mostrarAlerta("Login efetuado com sucesso!", 1);
      // // Exemplo de como chamar a função
      // document.getElementById('liveAlertBtn').addEventListener('click', () => {

      // });
      function formatarParaReal(valor) {
    return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
}


    </script>

    <script id="FuncaoCadastro">
      function cadastroCliente() {
        document.getElementById("conteudo-principal").innerHTML = `
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h1>Cadastro de Clientes</h1>
      </div>
    </div>
  </div>
  `;
      }
      function cadastrofornecedores() {
        document.getElementById("conteudo-principal").innerHTML = `
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h1>Cadastro de fornecedores</h1>
      </div>
    </div>
  </div>
  `;
      }
      function cadastroprodutos() {
        document.getElementById("conteudo-principal").innerHTML = `
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h1>Cadastro de produtos</h1>
      </div>
    </div>
  </div>
  `;
      }
      function cadastroInputnotas_entrada() {
        mostrarSpinner();
        $.ajax({
          type: "POST",
          url: urlAjax,
          data: { qualFuncao: "inputCadastroNotaEntrada" },
          dataType: "json",
          success: function (response) {
            esconderSpinner();
            let formHTML = '<form id="notaEntradaForm"><div class="row">'; // Começo do formulário

            if (Array.isArray(response)) {
              response.forEach((field) => {
                const inputId = field.type;

                if (inputId == "textarea") {
                  formHTML += `
                            <div class="col-6">
                              <div class="mb-3">
                                <label for="${
                                  field.label
                                }" class="form-label">${field.label}</label>
                                <textarea 
                                  class="form-control cadastroNFE" 
                                  id="${field.label}" 
                                  placeholder="${field.placeholder}" 
                                  ${
                                    field.required ? "required" : ""
                                  }></textarea>
                              </div>
                            </div>`;
                } else {
                  formHTML += `
                            <div class="col-6">
                              <div class="mb-3">
                                <label for="${
                                  field.label
                                }" class="form-label">${field.label}</label>
                                <input 
                                  type="${field.type}" 
                                  class="form-control cadastroNFE" 
                                  id="${field.label}" 
                                  placeholder="${field.placeholder}" 
                                  ${field.required ? "required" : ""}>
                              </div>
                            </div>`;
                }
              });

              formHTML += `</form> </div>`; // Fechamento do formulário

              // Insere o formulário dentro do corpo do modal
              document.getElementById("modalBodyContent").innerHTML = formHTML;

              // Exibe o modal
              $("#modalCadastroNotaEntrada").modal("show");
            } else {
              console.error(
                "A resposta não contém um array de campos",
                response
              );
            }
          },
          error: function (error) {
            esconderSpinner();
            mostrarAlerta(`Erro na requisição: ${error}`, 2);
            // Forneça feedback ao usuário aqui
          },
        });
      }

      function cadastronotas_entrada() {
        $.ajax({
          type: "POST",
          url: urlAjax,
          data: { qualFuncao: "carregarBaseNfe" },
          dataType: "json",
          success: function (response) {
            if (Array.isArray(response)) {
              renderTable(response); // Apenas os 10 primeiros registros
            } else {
              console.error(
                "A resposta não contém um array de campos",
                response
              );
            }
          },
          error: function (error) {
            console.error("Erro na requisição Ajax ==>", error);
            // Forneça feedback ao usuário aqui
          },
        });
      }
      function salvarCadastroNotaEntrada() {
        mostrarSpinner();
        let formData = {}; // Objeto para armazenar os dados do formulário

        // Pegar todos os valores dos inputs com a classe 'cadastroNFE'
        $(".cadastroNFE").each(function () {
          formData[this.id] = $(this).val();
        });

        // Enviar os dados via Ajax
        $.ajax({
          type: "POST",
          url: urlAjax,
          data: {
            qualFuncao: "salvarCadastroNotaEntrada",
            formData: formData,
          },
          success: function (response) {
            esconderSpinner();
            $("#modalCadastroNotaEntrada").modal("hide"); // Fechar o modal após salvar
            mostrarAlerta("Dados salvos com sucesso!", 1);
          },
          error: function (error) {
            esconderSpinner();
            console.error("Erro ao salvar os dados:", error);
            mostrarAlerta("Erro ao salvar os dados.", 2);
          },
        });
      }

      function renderTable(data) {
        let formHTML = `
    <div class="card">
        <div class="card-header">
            <div class='row justify-content-between'>
                <div class="col-lg-6">
                    <h1>Cadastro de notas de entrada</h1>
                </div>
              <div class="col-lg-3">
                    </button>
                                      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="cadastroInputnotas_entrada()">
                        <i class="bi bi-pencil-fill"></i>
                        <span>Cadastrar</span>
                    </button>
                </div>
                <div class="col-sm-1">
                    <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"  data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
                        <span class="material-symbols-outlined">
                            keyboard_double_arrow_right
                        </span>
                    </button>
                </div>
            </div>

            <div class='row'>
                <div class='card-body'>

                </div> 
                <div class="table-responsive">
                    <table id="nfeTable" class="table table-hover">
                    <thead>
                        <tr>
                            <th scope="col"></th>
                            <th scope="col">ID</th>
                            <th scope="col">Número NFe</th>
                            <th scope="col">Data Emissão</th>
                            <th scope="col">Produto</th>
                            <th scope="col">Quantidade</th>
                            <th scope="col">Valor Total</th>
                            <th scope="col">Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data
                          .map(
                            (element, index) => `
                        <tr>
                            <td><input class="form-check-input" type="checkbox" id="${element.id}" checked></td>
                            <td>${element.id}</td>
                            <td>${element.numeroNFe}</td>
                            <td>${element.dataEmissao}</td>
                            <td>${element.produto}</td>
                            <td>${element.quantidade}</td>
                            <td>${formatarParaReal(element.valorTotal)}</td>
                            <td>
                                <button class="btn btn-primary">Editar</button>
                                <button class="btn btn-danger">Excluir</button>
                            </td>
                        </tr>`
                          )
                          .join("")}
                    </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasRightLabel">Filtro Avançado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <div id="conteudoOffCanvas"></div>
            </div>
        </div>
        <!-- Modal HTML -->
        <div class="modal fade" id="modalCadastroNotaEntrada" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Cadastro de Nota de Entrada</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body" id="modalBodyContent">
                <!-- Formulário será injetado aqui -->
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-primary" onclick="salvarCadastroNotaEntrada()">Salvar</button>
              </div>
            </div>
          </div>
        </div>


    </div>`;

        document.getElementById("conteudo-principal").innerHTML = formHTML;

        // Inicializa o DataTables com botões de exportação
        $("#nfeTable").DataTable({
          paging: true, // Desabilita a paginação
          pageLength: 10, // Define o número de registros por página
          lengthMenu: [
            [10, 25, 50, -1],
            [10, 25, 50, "Todos"],
          ], // Opções de exibição de registros por página
          searching: true, // Desabilita a busca nativa, já que temos a busca personalizada
          scrollCollapse: true, // Desabilita o scroll horizontal
          fixedHeader: true, // Fixa o cabecalho
          responsive: true,
          language: {
            url: "https://cdn.datatables.net/plug-ins/1.10.25/i18n/Portuguese-Brasil.json",
          },
          orderCellsTop: true, // Move a coluna de ordem para o topo
          columnDefs: [{ targets: [3], orderable: false }],
          order: [[1, "desc"]], // Define a coluna e o tipo de ordenação
          ordering: true, // Habilita a ordenação
          dom: "Bfrtip", // Define os botoes de exportação
          buttons: ["copy", "csv", "excel", "pdf", "print"],
        });
      }

      function cadastroOffCanvas() {
        document.getElementById("conteudoOffCanvas").innerHTML = `
      <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
          <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasRightLabel">Filtro Avançados</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
              <div id="conteudoOffCanvas"></div>
          </div>
      </div>
      `;
      }
      function converteNumeroParaReal(numero) {
        return new Intl.NumberFormat("pt-BR", {
          style: "currency",
          currency: "BRL",
        }).format(numero);
      }
      function convertequantida(numero) {
        let numeroArredondado = numero.toFixed(2); // "1.21" como uma string
        return (numeroArredondado = parseFloat(numeroArredondado)); // 1.21 como um número
      }
      function salvarNFE() {
        // Captura todos os inputs e textareas com a classe 'cadastroNFE'
        const inputs = document.querySelectorAll(".cadastroNFE");
        let data = {};
        inputs.forEach((input) => {
          data[input.id] = input.value; // Usa o id do input como chave e o valor inserido como valor
        });
      }
      //   document.getElementById("salvarNFE").addEventListener("click", function () {
      //   // Captura todos os inputs e textareas com a classe 'cadastroNFE'
      //   const inputs = document.querySelectorAll(".cadastroNFE");
      //   let data = {};

      //   inputs.forEach((input) => {
      //     data[input.id] = input.value; // Usa o id do input como chave e o valor inserido como valor
      //   });

      //   // Faz a requisição Ajax para enviar os dados
      //   $.ajax({
      //     url: urlAjax,
      //     method: 'POST',
      //     data: {
      //       qualFuncao: "salvarNotaEntrada",
      //       dados: data,
      //     },
      //     success: function (response) {
      //       mostrarAlerta("Nota fiscal cadastrada com sucesso!",1);
      //     },
      //     error: function (error) {
      //       console.error("Erro ao salvar os dados:", error);
      //       mostrarAlerta("Erro ao cadastrar nota fiscal.",2);
      //     },
      //   });
      // });

      // chamaTemplate("notas_entrada");
    </script>
  </body>
</html>
